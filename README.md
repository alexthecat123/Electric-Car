# Electric-Car
A homemade self-driving car made with hoverboard motors and controlled with a PlayStation 2 controller.

This repository contains the code for a human-rideable electric car that I made earlier this year. It has the ability to act fully autonomously using a Pixhawk autopilot and GPS, but this functionality is currently disabled for safety reasons and because I find it more fun to drive it myself. The vehicle is built out of wood and has a chair bolted to the top for the passenger. The passenger drives the car with a PlayStation 2 controller, which is connected to an Arduino Uno. The code that reads the PlayStation controller makes use of the PsxNewLib library by Sukkopera (https://github.com/SukkoPera/PsxNewLib) and is heavily based off of the DumpButtonsBitBang example sketch included with this library. The Arduino processes the signals coming from the left and right analog sticks on the controller and converts them into PWM signals for the left and wheels of the car. These PWM signals are sent to two FSESCs (https://flipsky.net/products/torque-esc-vesc-%C2%AE-bldc-electronic-speed-controller), which control the two hoverboard motors in the rear wheels of the vehicle. There is also a second Arduino on the vehicle that controls a strip of addressable RGB LEDs that are mounted around the edge of the car. The LED routines are handled by a separate Arduino from the one that generates the PWM signals for the motors to ensure that a bug in the LED software would not cause a crash and potential injury for the passenger. The LED Arduino is also controlled by the PlayStation controller, allowing certain buttons on the controller to change the color, pattern, or effect that the lights generate. These button presses on the controller are detected by the PWM Arduino and are sent over serial to the LED Arduino. The entire system is powered by three 36V 4.4Ah batteries wired in parallel and a voltage readout is mounted on one of the arms of the chair so that the driver can see how much charge is remaining. This setup typically allows the vehicle to drive for around two miles on a charge.

# Files:
  - **carControls.jpg** shows the functions of the analog sticks and all of the buttons on the PlayStation controller as they relate to the car.
  - **carLEDController.ino** is the Arduino sketch that receives LED-related commands from the main Arduino and adjusts the color, pattern, or effect of the lights accordingly.
  - **carLEDControllerDelay.ino** is an older version of carLEDController that uses blocking delays instead of non-blocking delays for the timings of the different lighting effects.
  - **ps2Driving.ino** is the Arduino sketch that reads the PlayStation 2 controller, generates the resulting PWM signals for controlling the motors, and sends any LED-related button presses to the LED controller Arduino over serial.

